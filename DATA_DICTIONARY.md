# Data Dictionary - SASE Model

This document provides detailed specifications for all data files in the SASE model repository.

## Table of Contents
1. [AllVirtualPatientTypes.csv](#allvirtualpatienttypescsv-26-columns)
2. [Classification Files](#classification-files)
3. [Intermediate Files](#intermediate-files)
4. [Variable Definitions](#variable-definitions)

---

## AllVirtualPatientTypes.csv (26 columns)

This is the primary output file containing all virtual patient data with complete classifications.

### Column Specifications

| Column | Variable | Units | Range | Description |
|--------|----------|-------|-------|-------------|
| **Model Parameters (Columns 1-17)** |
| 1 | κ_SA | [units] | [min, max] | SA colonization rate coefficient |
| 2 | κ_SE | [units] | [min, max] | SE colonization rate coefficient |
| 3 | δ_A | [units] | [min, max] | SA decay/death rate |
| 4 | δ_E | [units] | [min, max] | SE decay/death rate |
| 5 | δ_B | [units] | [min, max] | Barrier degradation rate |
| 6 | A_th | [units] | [min, max] | SA population threshold for barrier damage |
| 7 | E_th | [units] | [min, max] | SE population threshold |
| 8 | α | [units] | [min, max] | SA growth rate parameter |
| 9 | β | [units] | [min, max] | SE growth rate parameter |
| 10 | γ | [units] | [min, max] | Barrier recovery rate |
| 11 | [param_11] | [units] | [min, max] | [Description] |
| 12 | [param_12] | [units] | [min, max] | [Description] |
| 13 | [param_13] | [units] | [min, max] | [Description] |
| 14 | [param_14] | [units] | [min, max] | [Description] |
| 15 | [param_15] | [units] | [min, max] | [Description] |
| 16 | [param_16] | [units] | [min, max] | [Description] |
| 17 | [param_17] | [units] | [min, max] | [Description] |
| **Steady States (Columns 18-20)** |
| 18 | A* | Population | [0, ∞) | Steady-state SA population density |
| 19 | E* | Population | [0, ∞) | Steady-state SE population density |
| 20 | B* | Fraction | [0, 1] | Steady-state barrier function (1 = healthy, <1 = damaged) |
| **Stability Analysis (Columns 21-23)** |
| 21 | λ₁ | 1/time | (-∞, ∞) | First eigenvalue (real part determines stability) |
| 22 | λ₂ | 1/time | (-∞, ∞) | Second eigenvalue |
| 23 | λ₃ | 1/time | (-∞, ∞) | Third eigenvalue |
| **Classifications (Columns 24-26)** |
| 24 | Type | Category | {0, 1, 2} | Patient type: 0=Asymp, 1=Rev, 2=Irrev |
| 25 | Region | Category | {1-9} | Characteristic region based on SA/SE/B* values |
| 26 | [class_26] | Category | [range] | [Additional classification if used] |

### Data Types
- Columns 1-23: `float64` (continuous variables)
- Columns 24-26: `int` (categorical variables)

### Missing Values
- No missing values should be present
- If B* = NaN, the steady state was not found (investigate convergence)

---

## Classification Files

These three files are generated by `g_ClassificationFiles.m` and used as inputs for violin plot generation.

### asymp.csv
**Description**: Virtual patients with only healthy barrier states

**Selection Criteria**:
- All stable states for this virtual patient have B* = 1.0 (within precision threshold)
- No stable states with B* < 1.0 exist
- Represents healthy skin that maintains barrier integrity

**Structure**: Same 26 columns as AllVirtualPatientTypes.csv

**Expected Size**: ~X% of total virtual patients

### rev_SAkilling.csv
**Description**: Virtual patients with both healthy and damaged barrier states

**Selection Criteria**:
- At least one stable state has B* = 1.0 (healthy)
- At least one stable state has B* < 1.0 (damaged)
- SA-killing intervention can potentially restore barrier function
- Represents reversible disease state

**Structure**: Same 26 columns as AllVirtualPatientTypes.csv

**Expected Size**: ~X% of total virtual patients

### irrev_SAkilling.csv
**Description**: Virtual patients with only damaged barrier states

**Selection Criteria**:
- All stable states have B* < 1.0 (damaged barrier)
- No stable states with B* = 1.0 exist
- Represents chronic, difficult-to-treat AD
- SA-killing alone may be insufficient for treatment

**Structure**: Same 26 columns as AllVirtualPatientTypes.csv

**Expected Size**: ~X% of total virtual patients

---

## Intermediate Files

### SampledParameters.mat/.csv (17 columns)
**Generated by**: `g_samples.m`

**Description**: 1 million randomly sampled parameter sets

**Structure**: Only columns 1-17 from main dataset (model parameters only)

**Sampling Method**: [Describe: Latin hypercube? Uniform? Log-uniform?]

### AllSteadyStates.mat/.csv (23 columns)
**Generated by**: `a_SampledParameters.m`

**Description**: Steady states and eigenvalues for each parameter set

**Structure**: Columns 1-23 from main dataset
- Parameters (1-17)
- Steady states (18-20)
- Eigenvalues (21-23)

**Note**: Each parameter set may have multiple rows (one per stable state found)

### AllVirtualPatients.mat/.csv (24-25 columns)
**Generated by**: `g_VirtualPatients.m`

**Description**: Virtual patients with site IDs and state counts

**Structure**: Columns 1-23 plus:
- Site ID (column 1, overwriting or prepending)
- Number of stable states (column 2 or 24)

---

## Variable Definitions

### Stability Criteria

A steady state is considered **stable** if all eigenvalues have negative real parts:
- Re(λ₁) < 0
- Re(λ₂) < 0  
- Re(λ₃) < 0

### Barrier Function (B*)

**Interpretation**:
- B* = 1.0: Healthy, intact skin barrier
- 0 < B* < 1.0: Compromised barrier (AD lesion)
- B* closer to 0: More severe barrier dysfunction

**Precision**: Floating-point comparisons use threshold of 1e-6
- B* is "healthy" if |B* - 1.0| < 1e-6
- Adjust threshold in `g_ClassificationFiles.m` if needed

### Region Classifications (Column 25)

Based on the nine possible characteristic population densities outlined in Supplementary Note 3:

| Region | SA Level | SE Level | B* Range | Clinical Interpretation |
|--------|----------|----------|----------|-------------------------|
| 1 | Low | Low | ~1.0 | Healthy skin, normal flora |
| 2 | Low | High | [range] | SE-dominated, [state] |
| 3 | High | Low | [range] | SA-dominated, likely inflamed |
| 4 | High | High | [range] | Both bacteria elevated |
| 5 | [Level] | [Level] | [range] | [Description] |
| 6 | [Level] | [Level] | [range] | [Description] |
| 7 | [Level] | [Level] | [range] | [Description] |
| 8 | [Level] | [Level] | [range] | [Description] |
| 9 | [Level] | [Level] | [range] | [Description] |

**Thresholds** (modify these based on your actual definitions):
- Low SA: A* < [threshold]
- High SA: A* ≥ [threshold]
- Low SE: E* < [threshold]
- High SE: E* ≥ [threshold]

### Special Cases

**Multiple states in same region** (e.g., two stable states both in Region 5):
- Classification rule: [Specify your rule]
- Example: Take the [lowest/highest/average] B* value

**Three or more stable states**:
- Classification rule: [Specify your rule]
- Type assignment: [How to determine if 0/1/2]

**Merged regions 8/9**:
- These regions are [combined/treated separately] because [reason]

---

## Parameter Ranges (Table S1 Reference)

For detailed parameter definitions and biological interpretations, refer to **Table S1** in the Supplementary Materials.

### Typical Parameter Ranges

```
κ_SA:  [min] to [max] [units] - [description]
κ_SE:  [min] to [max] [units] - [description]
δ_A:   [min] to [max] [units] - [description]
δ_E:   [min] to [max] [units] - [description]
...
```

---

## File Format Notes

### CSV Format
- Delimiter: comma
- Decimal separator: period
- No header row (pure numeric data)
- Encoding: UTF-8

### MAT Format
- MATLAB format v7.3
- Variable name: typically matches filename (e.g., `AllVirtualPatientTypes`)
- Can be loaded with: `data = load('filename.mat')`

---

## Data Quality Checks

When working with these files, verify:

1. **No missing values**: `sum(isnan(data(:)))` should equal 0
2. **B* in range**: All B* values should be in [0, 1]
3. **Positive populations**: A* and E* should be ≥ 0
4. **Valid categories**: Type ∈ {0,1,2}, Region ∈ {1-9}
5. **Stable eigenvalues**: For stable states, all Re(λ) < 0

### Example Validation Script

```matlab
% Load data
data = readmatrix('AllVirtualPatientTypes.csv');

% Check for missing values
assert(sum(isnan(data(:))) == 0, 'Missing values detected');

% Check B* range
B_star = data(:, 20);
assert(all(B_star >= 0 & B_star <= 1), 'B* out of range');

% Check population positivity
A_star = data(:, 18);
E_star = data(:, 19);
assert(all(A_star >= 0), 'Negative A* detected');
assert(all(E_star >= 0), 'Negative E* detected');

% Check category ranges
type = data(:, 24);
region = data(:, 25);
assert(all(ismember(type, [0,1,2])), 'Invalid type classification');
assert(all(ismember(region, 1:9)), 'Invalid region classification');

fprintf('All data quality checks passed!\n');
```

---

## Questions?

If you need clarification on any data specifications, please:
1. Check the paper and Supplementary Materials
2. Refer to [REPRODUCTION_GUIDE.md](REPRODUCTION_GUIDE.md)
3. Open an issue on GitHub

---

**Last Updated**: [Date]  
**Version**: 1.0